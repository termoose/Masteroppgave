
\section{Algebraic curves}
In this section we define the fundamental objects in algebraic geometry and state
some facts about their structure. We will then move on to the theory of
curves and Weil divisors. We will closely be following \cite{AEC} with some aid from
\cite{Fulton}.

Given a field $k$ we write $\mathbb{A}^n = \left\{ (x_1,\ldots,x_n) : x_i\in \bar{k}\right\}$ for the
affine $n$-space, where $\bar{k}$ denotes the algebraic closure of the field $k$.

\begin{mydef}
\emph{Projective $n$-space} over a field $k$ denoted $\mathbb{P}^n$ is the set 
of all $(n+1)$-tuples $$(x_0,\ldots,x_n)\in\mathbb{A}^{n+1}$$
modulo the equivalence relation given by $(x_0,\ldots,x_n)\sim(y_0,\ldots,y_n)$ 
if there exists $\lambda\in \bar{k}$ such that $x_i=\lambda y_i$.
The equivalence class containing $(x_0, \ldots, x_n)$ is denoted $[x_0,\ldots,x_n]$.
\end{mydef}

Let $Gal(\bar{k}/k)$ be the Galois group of $\bar{k}/k$. This group acts on
$\mathbb{A}^n$ in the following way: given $\sigma \in Gal(\bar{k}/k)$ and $P\in \mathbb{A}^n$
we define $\sigma(P) = (\sigma(x_1),\ldots,\sigma(x_n))$. Now we can define
the set of $k$-rational points in $\mathbb{A}^n$ to be those fixed under action by
the Galois group
$$ \mathbb{A}^n(k) = \{ P \in \mathbb{A}^n : \sigma(P) = P\quad \forall\, \sigma \in
Gal(\bar{k}/k) \} $$

Similarly it can be shown that the set of $k$-rational points in $\mathbb{P}^n$ are
$$ \mathbb{P}^n(k) = \{ P \in \mathbb{P}^n : \sigma(P) = P\quad \forall\, \sigma \in 
Gal(\bar{k}/k) \} $$

\begin{mydef}
 A polynomial $f\in\bar{k}[x_0,\ldots,x_n]$ is said to be \emph{homogeneous of degree $d$} if for all
$\lambda\in\bar{k}$ we have.
$$f(\lambda x_0,\ldots,\lambda x_n) = \lambda^d f(x_0,\ldots,x_n)$$
Furthermore an ideal $I\subseteq\bar{k}[X]$ is said to be \emph{homogeneous} if it is generated
by homogeneous polynomials.
\end{mydef}

\begin{mydef}
 A \emph{projective algebraic set} is of the form
$$ V_I = \{ P\in \mathbb{P}^n : f(P) = 0\, \forall homogeneous\, f\in I \} $$
Given such a set $V$ we associate to it an ideal $I(V) \in \bar{k}[x_0,\ldots, x_n]$ generated by
$$ \{f\in\bar{k} : f\, homogeneous\, and\, f(P)=0\, \forall P\in V \} $$
\end{mydef}

\begin{mydef}
 A projective algebraic set $V$ is called a \emph{projective variety} if the homogeneous
ideal defined above is a prime ideal in $\bar{k}[x_0,\ldots,x_n]$.
\end{mydef}

We say that the variety $V$ is \emph{defined over $k$}, denoted $V/k$, if its associated ideal $I(V)$
can be generated by polynomials in $k[x_0,\ldots,x_n]$.

\begin{mydef}
 Let $V/k$ be a projective variety, then the projective coordinate ring of $V/k$ is defined by
$$ k[V] = \frac{k[x]}{I(V/k)}$$
Note that since $I(V/k)$ is a prime ideal, the coordinate ring is an integral domain.
This enables us to form the quotient field of $k[V]$ which we denote $k(V)$, and it is called
the \emph{function field} of $V$.
\end{mydef}

A rather interesting ideal to keep in mind is given by
$$ M_P = \{ f\in \bar{k}[V] : f(P)=0 \} $$
This is a maximal ideal because the map $\phi: \bar{k}[V] \rightarrow \bar{k}$ given by
$ f \mapsto f(P) $ has kernel exactly $M_P$. It is clearly onto, so it induces an
isomorphism $$\tilde{\phi}: \bar{k}[V]/M_P \rightarrow \bar{k} $$

\begin{mydef}
 The \emph{localization of $\bar{k}[V]$ at $M_P$} is given by
$$ \bar{k}[V]_P = \{ h \in \bar{k}[V] : h = f/g\, f,g\in \bar{k}[V]\, and\, g(P)=0 \} $$
The functions in $\bar{k}[V]_P$ are all defined at $P$.
\end{mydef}

%\begin{ex}
% If $V$ is a variety given by a single non-constant polynomial equation
%$$f(x_1,\ldots,x_n) = 0$$ 
%then the dimension of the variety $dim(V)$ is $n-1$. The (projective) varieties
%we will study are called \emph{elliptic curves} and are
%given by polynomial equations
%$$E: y^2 = x^3+ax+b$$
%They correspond to polynomials of the form $f(x,y) = x^3+ax+b-y^2$ so $dim(E)=1$.
%We say curves are projective varieties of dimension $1$.
%\end{ex}

\begin{mydef}
 Let $V$ be a variety, then the \emph{dimension} of $V$ is the transcendence degree of $\bar{k}(V)$ over
$\bar{k}$. We denote this value by $dim(V)$.
\end{mydef}

Given the above definition we have in particular that the transcendence degree of $\bar{k}[x,y]$ over
$\bar{k}$ is $2$, because $x$ and $y$ are two (independent) transcendental variables.

\begin{ex}
 Let $V$ be the variety given as
$$ V: y^2 = x^3 + ax + b $$
this corresponds to a polynomial $f(x,y) = x^3+ax+b-y^2 \in \bar{k}[x,y]$. Since there
is imposed a relation between $x$ and $y$ we  have that the transcendence degree is $1$ and
$dim(V)=1$. The varieties of dimension $1$ are called \emph{curves}, and is what we'll be working with.
\end{ex}

Such varieties are not very interesting unless we define maps between them.

\begin{mydef}
 Let $V_1$ and $V_2$ be projective varieties, a \emph{rational map} $\phi: V_1 \rightarrow V_2$
is a set of maps $\{\phi_0,\ldots,\phi_n\}$ with $\phi_i \in \bar{k}(V_1)$ such that for every
$P\in V_1$ we define
$$\phi(P) = [\phi_0(P),\ldots,\phi_n(P)] \in V_2$$
Such a rational map is called a \emph{morphism} if it is defined at every point $P$.
\end{mydef}

The varieties and the morphisms between them make up a category, so our next
definition of an isomorphism will be the general one found in category theory.

\begin{mydef}
 Two varieties $V$ and $W$ are \emph{isomorphic} denoted $V\simeq W$
if there exist morphisms $\phi: V \rightarrow W$ and $\psi: W \rightarrow V$ such that
$\phi \psi = 1_W$ and $\psi \phi = 1_V$.
If the rational functions $\psi$ and $\phi$ are defined over $k$ we say that $V$ and $W$
are isomorphic over $k$. If not, they are isomorphic over some field extension of $k$
(i.e. $\bar{k}$).
\end{mydef}

Recall that curves are projective varieties of dimension one. Even more special
are elliptic curves, which are curves with \emph{genus} equal to 1. This will
be introduced later on. These are in practise the only curves we will be working with.

\begin{mydef}
 Let $C$ be a curve defined by the polynomial equation
$$f(x,y) = 0$$
and $P=(x_0,y_0) \in C$ a point on the curve. Then $P$ is \emph{singular} if and only if all
partial derivatives vanish at $P$
$$\frac{\partial}{\partial x}f(P) = \frac{\partial}{\partial y}f(P) = 0$$
\end{mydef}

This is in fact the implicit function theorem at work, saying that there is no way to
represent the curve as the graph of a function of one variable near $P$.
In addition we say that a curve $C$ is \emph{smooth} if it has no singular points.

\begin{mydef}
 Let $C$ be a curve and $P\in C$ a non-singular point on the curve. A valuation on
$\bar{k}[C]_P$ is given by
$$ ord_P : \bar{k}[C]_P \rightarrow \{ 0, 1, 2, \ldots \} \cup \{ \infty \} $$
$$ ord_P(f) = max \{ d\in \mathbb{Z} : f\in M_P^d \} $$
This is called \emph{the order of $f$ at $P$}.
Letting $ord_P(f/g) = ord_P(f) - ord_P(g)$ we can extend the definition to the entire
quotient ring $\bar{k}(C)$
$$ ord_P: \bar{k}(C) \rightarrow \mathbb{Z}\cup \{\infty \} $$
\end{mydef}

The definition of order agrees with the one found in complex analysis.
If $ord_P(f) < 0$ then $f$ has a pole at $P$, similarly if $ord_P(f) \ge 0$ then $f$ 
has a zero and is defined at $P$.

\begin{prop}
 Let $C$ be a smooth curve. If $f\in \bar{k}(C)$ is not the constant function, then
$f$ has finitely many poles and zeros.
\label{prop:1}
\end{prop}

\begin{mydef}
 The \emph{divisor group} of a curve $C$ is the free abelian group generated by
points of $C$, denoted $Div(C)$. A divisor $D\in Div(C)$ is of the form
$$ D = \sum_{P\in C} n_P(P)$$
with $n_P\in\mathbb{Z}$ and $n_P = 0$ for all but finitely many $P$.
\end{mydef}

With this in mind we can define the degree of a divisor as the sum of its 
coefficients. We also define the sum of a divisor as the sum in the group $E(\bar{k})$, so
$$ deg(D) = deg\left(\sum_{P\in C} n_P(P)\right) = \sum_{P\in C} n_P \in \mathbb{Z}$$
$$ sum(D) = sum\left(\sum_{P\in C} n_P(P)\right) = \sum_{P\in C} n_P P \in E(\bar{k})$$

These functions enable us to define the subgroup of divisors of degree zero,
$Div^0(C) \subset Div(C)$, so $Div^0(C) = \{ D\in Div(C) : deg(D) = 0 \}$.

Now let $C$ be a smooth curve and $f\in \bar{k}(C)$ a non-zero function. Since $f$
has finitely many poles and zeros (Prop. \ref{prop:1}) we can define the divisor of a
function as
$$ div(f) = \sum_{P\in C} ord_P(f)(P) $$
Note that $ord_P$ is a valuation we have $ord_P(fg) = ord_P(f)+ord_P(g)$
for non-zero $f,g\in \bar{k}(C)$. Thus we get a group homomorphism
$$ div: \bar{k}(C)^* \rightarrow Div(C)$$

\begin{mydef}
 The \emph{principal divisors} of $C$ are the divisors of the form
$ D = div(f) $ for some non-zero $f\in \bar{k}(C)$. This is exactly
the image of the function $div$ and we denote this set by $Prin(C)$.
\end{mydef}

Note that since divisors of rational functions have the same number of poles
and zeros (when counted correctly), we have $deg(div(f)) = 0$.

Two divisors are said to be \emph{equivalent} denoted $D_1 \sim D_2$ if
their difference is a principal divisor, $D_1 - D_2 = div(f)$ for some $f\in \bar{k}(C)$.
We say that a divisor $D$ is
\emph{positive} $\sum n_P(P)=D \geq 0$ if $n_P \geq 0$ for every $P\in C$. Furthermore
we can put a partial ordering on on $Div(C)$ writing $D_1 \geq D_2$ to indicate that $D_1 - D_2$ is positive.

\begin{ex}
 Inequalities can easily summarize some key properties of a function. So instead of
saying $f \in \bar{k}(C)$ is regular everywhere except at $P$ and $Q$, where it has a
pole and a root of order $m$ and $n$ respectively, we could write
$$ div(f) \geq -m(P)+n(Q) $$
\end{ex}

The last example motivates our next definition, where we collect all functions
which satisfy some inequality. This turns out to make up a finite dimensional
$\bar{k}$-vector space.

\begin{mydef}
 Let $D \in Div(C)$ be a divisor, and we define the set of functions
$$ \mathscr{L}(D) = \{ f\in \bar{k}(C) : div(f) \geq -D \} \cup \{ 0\} $$
\end{mydef}

This vector space can be seen to be finite by the next proposition, a proof of
which can be found in \cite{Fulton}.

\begin{prop}
 $\mathscr{L}(D)$ is a finite dimensional $\bar{k}$-vector space, and we denote
its dimension by
$$ \ell(D) = dim_{\bar{k}} \mathscr{L}(D) $$
\end{prop}

Next we introduce differential forms on our curves, these will be useful for different purposes
as described below. In addition they will help us state the Riemann-Roch theorem and a definition
of the genus $g$.

\begin{mydef}
 The space of differential forms on a curve $C$ is a $\bar{k}(C)$-vector space denoted $\Omega_C$
generated by symbols subject to the relations known from analysis. 
For $x, y \in \bar{k}(C)$ and $a \in \bar{k}$
\begin{enumerate}
  \item $d(x+y) = dx + dy$
  \item $d(xy) = xdy + ydx$
  \item $da = 0$
\end{enumerate}
Let $f_i \in \bar{k}(C)$ and $dx_i$ be the symbols as defined above, a general
element $\omega \in \Omega_C$ is of the form
$$ \omega = \sum f_i dx_i $$
\end{mydef}

The divisor of a differential is given by
$$ div(\omega) = \sum_{P\in C} ord_P(\omega)(P) \in Div(C)$$
Divisors in the image of the map $div: \Omega_C \rightarrow Pic(C)$ are called
\emph{canonical divisors}. They will play a role in the next theorem which will
serve as an important tool for calculating the dimension of the vector space
$\mathscr{L}(D)$, which will be crucial in establishing an important isomorphism.

\begin{thm}
 \textbf{(Riemann-Roch)}
  Let $C$ be a smooth curve and $K_C$ a canonical divisor on $C$. Then for
any $D \in Div(C)$ we have
$$ \ell(D) - \ell(K_C - D) = deg(D) - g + 1 $$
where $g \geq 0$ is called the \emph{genus} of the curve $C$.
\end{thm}

 A proof would be well outside the scope of this paper, but a classical proof based
on Noether's reduction lemma can be found in \cite{Fulton}. Almost directly from the
above theorem follows a nice corollary, its short proof can be found in \cite{AEC}.

\begin{cor} \label{rrcor}
 \begin{enumerate}
Let $K_C$ be a canonical divisor, then
  \item[a)] $\ell(K_C) = g$
  \item[b)] $\deg K_C = 2g - 2$
  \item[c)] $\deg D > 2g - 2 \implies \ell(D) = \deg D - g + 1$ 
 \end{enumerate}
\end{cor}

Given a non-constant map of curves $\phi: C_1 \rightarrow C_2$, we have an induced map
on function fields $\phi^*: K(C_2) \rightarrow K(C_1)$. From this again we get an induced
map on differential forms
$$ \phi^*: \Omega_{C_2} \rightarrow \Omega_{C_1} $$
$$ \phi^*\left(\sum f_i dx_i\right) = \sum (\phi^* f_i) d(\phi^* x_i) $$
\label{diff}

\begin{mydef} 
 Let $\phi: C_1 \rightarrow C_2$ be a map of curves and $\phi^*$ its induced map on
function fields. We then say that $\phi$ is a \emph{separable map} if
$K(C_1)/\phi^* K(C_2)$ is a separable extension.
\end{mydef}

Recall that a field extension is separable if and only if the derivative of the minimal
polynomial for each element is non-zero. This fact is the motivation for our next result,
which gives a useful criterion for determining when a map is separable.

\begin{prop} \label{diffsep}
 Let $\phi: C_1 \rightarrow C_2$ be a map of curves, then $\phi$ is separable if and only if
the induced map $\phi^*: \Omega_{C_2} \rightarrow \Omega_{C_1} $ is non-zero.
\end{prop}

Before leaving the realm of differentials for a while we introduce a special differential.
\begin{mydef}
The \emph{invariant differential} on $E: y^2 = x^3 + ax + b$ is given by
$$\omega = \frac{dx}{\frac{d}{dy}\left(y^2 - x^3  - ax - b\right)} = \frac{dx}{2y} $$
\end{mydef}
This is a \emph{holomorphic} differential, having no poles or zeros \cite{AEC}. The name comes from it
being invariant under the translation isomorphism
$$ t_Q: E \rightarrow E$$
$$ P \mapsto P + Q$$
as shown in \cite{AEC}. We note that since $t_Q^*(\omega) = \omega$ we have that
$t_Q^*(k\omega) = k t_Q^*(\omega) = k\omega$ for any integer $k$. Especially we have that
$2\omega = \frac{dx}{y}$ is also invariant under translation, this differential will be used
in Section \ref{satoh} \label{invariant}.

\begin{prop} \label{3.3}
 Let $C$ be a curve of genus $1$ (think elliptic curve), and let $P,Q\in C$ be points on the curve and
$(P), (Q)$ their corresponding divisors. Then we have that
$$ (P) \sim (Q) \iff P = Q $$
\end{prop}
\begin{proof}
 We prove from left to right, the other implication is trivial. Let $f\in \bar{k}(C)$ be such that
$$ div(f) = (P)-(Q) $$
so if $div(f) = 0$ then we are done. We have the vector space
$$ \mathscr{L}(Q) = \{ f\in \bar{k}(C) : div(f) \geq -(Q) \} \cup \{ 0 \} $$
which has dimension $\ell(Q) = dim_{\bar{k}} \mathscr{L}(Q)$. Since $deg(Q) = 1$ and $g = 1$
we can use Corollary \ref{rrcor}c 
$$\ell(Q) = \deg Q - g + 1 = 1$$
But since the constant functions are always in $\mathscr{L}(Q)$ we have by the dimension restriction that
they are the only ones, and $f \in \bar{k}$. This means that $div(f) = 0$ and we are done.
\end{proof}

\begin{thm} \label{isoteorem}
 $$ sum: Pic^0(E) \rightarrow E(\bar{k}) $$
is an isomorphism of abelian groups.
\end{thm}
\begin{proof}
 We begin by showing that there is a unique point $P \in E(\bar{k})$ associated to
each $D \in Div^0(E)$ as follows
$$ D \sim (P) -(O) $$
This will be given by a map
$$ \sigma: Div^0(E) \rightarrow E(\bar{k}) $$
From Corollary \ref{rrcor} we have that $\ell(D+(O)) = deg(D+(O)) = 1$ since $deg(D) = 0$.
Let then $f \in \bar{k}(E)$ be a generator for $\mathscr{L}(D+(O))$, so by definition
$$ div(f) \geq -D-(O) $$
But since $deg(div(f)) = 0$ and $deg(-D-(O)) = -1$ we have for some $P \in E(\bar{k})$ that
$$ div(f) = -D-(O)+(P) $$
which is exactly the definition of
$$ D \sim (P) - (O) $$

This point $P$ is unique, because if we assume that $P'$ is another point with the same
property, then
$$ (P) \sim D + (O) \sim (P') $$
so by Proposition \ref{3.3} we have that $ P = P'$.

The map $\sigma$ is easily seen to be a surjection, because for any $P \in E(\bar{k})$ we have
$$ \sigma((P)-(O)) = P $$

Now if we can show that the kernel of $\sigma$ is exactly the principal divisors we are done.
Let us assume that $\sigma(D) = O$ so from definition we have that $D \sim (O)-(O) \sim (O)$
meaning $D - (O) = div(f)$ for some $f \in \bar{k}(E)$, so $D = div(f)$ is principal.
For the other implication we assume that $D = div(f)$ is principal. Using the definition and
letting $P$ be any point and $f, f' \in \bar{k}(E)$ a calculation yields
$$ \sigma(D) = \sigma(div(f)) = (P)-(O) $$
$$ div(f) \sim (P) - (O) $$
$$ div(f) - (P) - (O) = div(f') $$
$$ (O) - (P) = div(f') - div(f) = div(f' f) $$
So $ (P) \sim (O) $ which implies $P = O$ from Proposition \ref{3.3}.

We have thus established the group isomorphism which we again will denote by
$$ \sigma : Div^0(E)/Prin(E) = Pic^0(E) \rightarrow E(\bar{k}) $$

\end{proof}

\begin{mydef}
 An \emph{isogeny} between two elliptic curves $E_1$ and $E_2$ is a morphism $\phi: E_1 \rightarrow E_2$
which satisfies $\phi(O) = O$. In addition, two curves are said to be \emph{isogenous} (of degree $n$) 
if there exists a non-zero isogeny (of degree $n$) between them.
\end{mydef}

Note that $\phi: E_1 \rightarrow E_2$ induces a map on Picard groups
$$\phi^*: Pic^0(E_2) \rightarrow Pic^0(E_1)$$
In addition we have isomorphisms $E_1 \overset{\sigma_1}{\simeq} Pic^0(E_1)$ and 
$E_2 \overset{\sigma_2}{\simeq} Pic^0(E_2)$ from Theorem \ref{isoteorem}, combining this gives a composition
$$ E_2 \overset{\sigma_2^{-1}}{\rightarrow} Pic^0(E_2) \overset{\phi^*}{\rightarrow} Pic^0(E_1)
\overset{\sigma_1^{-1}}{\rightarrow} E_1 $$

\begin{prop}
 The composition above is the \emph{dual isogeny} of $\phi$, denoted $\widehat{\phi}: E_2 \rightarrow E_1$.
It has the following properties 
\begin{enumerate}
 \item $\widehat{\phi}\phi = [deg(\phi)]$ on $E_1$ and $\phi\widehat{\phi} = [deg(\phi)]$ on $E_2$
 \item If $\psi: E_2 \rightarrow E_3$ is another isogeny then $\widehat{\psi \phi} = \widehat{\phi}\widehat{\psi}$
 \item If $\lambda: E_1 \rightarrow E_2$ is another isogeny then $\widehat{\phi+\phi} = \widehat{\phi}+\widehat{\psi}$
 \item $deg(\widehat{\phi}) = deg(\phi)$.
 \item $\widehat{\widehat{\phi}} = \phi$.
\end{enumerate}

\end{prop}
