\section{Weil pairing and Tate module}

\begin{prop}
 The \emph{multiplication by $n$} map
$$ [n] : E \rightarrow E $$
$$ P \mapsto nP $$
has order $n^2$.
\end{prop}
\begin{proof}
The shortest proof relies heavily on the dual isogeny, so letting $d = \deg [n]$ and using the properties of 
the dual isogeny we calculate
$$ [d] = \widehat{[n]}[n] = [n][n] = [n^2] $$
and since $End(E)$ is torsion free \cite{AEC} we get that $d = n^2$.
\end{proof}

A subgroup of $E(k)$ that will be of special interest to us is the group of points $P$
with finite order $n$, this is by definition the kernel of the multiplication by $n$ map.
\begin{mydef}
 The $n$-torsion subgroup denoted $E[n]$ is the group of points of order $n$ in $E$.
$$ E[n] = \left\{ P\in E : nP = O \right\}.$$
\end{mydef}

We are now ready to construct a bilinear pairing between the $n$-torsion subgroups of
an elliptic curve and the roots of unity $\mu_n$. This will prove useful to us in coming
proofs. In addition it has well established applications within number theory, cryptography
and identity based encryption.

The pairing we want to construct is of the form
$$ e_n : E[n] \times E[n] \rightarrow \mu_n.$$
Let $T\in E[n]$ be an $n$-torsion point. From \cite{Lawrence} we know that there exists
$f \in \bar{k}(E)$ such that $div(f) = n(T) - n(O)$. Now letting $T' \in E[n^2]$ be such
that $nT' = T$, we have a function $g \in \bar{k}(E)$ such that
$$ div(g) = \sum_{R\in E[n]} (T'+R)-(R). $$
This follows from the fact that there are $n^2$ points in $E[n]$, the points $(R)$ in the
sum cancel, so we are left with $n^2 T' = nT = O$. Clearly $\deg(div(g)) = 0$.

If we now form the composition $f \circ [n]$, we notice that the points $P = T' + R$ with
$R\in E[n]$ are those with the property $nP = T$. Now since $f$ has a root at $T$ from
construction, we see that $f \circ [n]$ has a root at $P$. Using the fact that $ord_P$ is a valuation
so that $div(g^n) = n\;div(g)$, and writing out the divisors of our functions we see that
$$ div(f \circ [n]) = n\sum_{R\in E[n]} (T'+R) - n\sum_{R\in E[n]} (R) = div(g^n).$$

Since our two rational functions $f \circ [n]$ and $g^n$ have the same divisors, they have the
same poles and zeros. Therefore they differ by multiplication of a constant, so
$f \circ [n] = \lambda g^n$ with $\lambda \in \bar{k}$. With a suitable choice of $\lambda$
we can assume that 
$$f \circ [n] = g^n.$$
Letting $S \in E[n]$ be another $n$-torsion point and $X \in E(\bar{k})$ a point on the curve we calculate that
$$ g(X + S)^n = (f \circ [n])(X + S) = f([n]X + [n]S) = f([n]X) = g(X)^n. $$
\begin{mydef}
 Given the above calculation the \emph{Weil pairing} is defined as
$$ e_n : E[n] \times E[n] \rightarrow \mu_n$$
$$ (S,T) \mapsto \frac{g(X + S)}{g(X)}. $$
\end{mydef}

\begin{prop}
 The Weil pairing $e_n$ satisfies the following properties
\begin{enumerate}
 \item Bilinear in both variables: $e_n(P_1 + P_2, Q) = e_n(P_1,Q)e_n(P_2,Q)$ and similarly for the other variable.
 \item Alternating: $e_n(P,Q) = e_n(Q,P)^{-1}$.
 \item Non-degenerate: If $e_n(P,Q) = 1$ for all $P \in E[n]$ then $Q=O$.
 \item Galois invariant: For all $\sigma \in Gal(\bar{k}/k)$ we have $e_n(P,Q)^\sigma = e_n(\sigma(P),\sigma(Q))$.
\end{enumerate}
\end{prop}
\begin{proof}
 See \cite{AEC}.
\end{proof}

\begin{prop}
Letting $\ell$ be a prime not dividing $char(k)$ we have the following isomorphism of abelian groups
 $$ E[\ell] \simeq \mathbb{Z}/\ell\mathbb{Z} \times \mathbb{Z}/\ell\mathbb{Z}. $$
\end{prop}

The last proposition enables us to view automorphism of $E[\ell]$ as $2\times 2$ invertible matrices,
so we obtain a  mod $\ell$ Galois representation
$$ Gal(\bar{k}/k) \overset{\rho}{\rightarrow} Aut(E[\ell]) \simeq GL_2(\mathbb{Z}/\ell\mathbb{Z}). $$
To avoid working with congruences and instead work with equalities, we can construct
and work with a field of characteristic 0. This is done by taking the inverse limit 
as introduced in Chapter \ref{p-adic} of the sequence
$$ \dots \overset{[l]}{\rightarrow} E[\ell^{n+1}] \overset{[l]}{\rightarrow} E[\ell^{n}] \overset{[l]}{\rightarrow} E[\ell^{n-1}] \rightarrow \ldots $$
$$ T_\ell(E) = \varprojlim E[\ell^n]. $$
This is called the \emph{$\ell$-adic Tate module} of E. Notice that since each of the groups $E[\ell^n]$ has a
$\mathbb{Z}/\ell^n\mathbb{Z}$-module structure, $T_\ell(E)$ will have natural structure as a module
over the ring of $\ell$-adic integers $\mathbb{Z}_\ell$ as follows: $r\in\mathbb{Z}_\ell$ and
$x=(x_n)_n\in T_\ell(E)$ then
$$ r(x_n)_n = ((r \mod p^n)x_n)_n.$$

Similarly we can in a sense ``glue'' together the Weil pairings
$$ e_{\ell^n} : E[\ell^n] \times E[\ell^n] \rightarrow \mu_{\ell^n} $$
by constructing the $\ell$-adic roots of unity, and we obtain what is called the
\emph{$\ell$-adic Weil pairing}
$$ e: T_\ell(E) \times T_\ell(E) \rightarrow T_\ell(\mu). $$

We end this section by stating a result which enables us to view endomorphisms on $E$ as
$2\times 2$ matrices by choosing a $\mathbb{Z}_\ell$ basis.
\begin{prop}
  The map $\phi: End(E) \rightarrow End(T_\ell(E))$ is an injective ring homomorphism. In addition
we have that $End(T_\ell(E)) \simeq M_2(\mathbb{Z}_\ell)$ where $M_2$ is the ring of $2\times 2$
matrices with $\mathbb{Z}_\ell$ coefficients.
\end{prop}
This will prove useful later on when establishing relations between determinants,
trace and degrees of maps.